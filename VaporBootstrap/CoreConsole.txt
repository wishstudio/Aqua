class Core.Console
{
	private static Core.StreamWriter out;

	public static function SetConsoleTitle(Core.String title)
	{
		Core.Native.Win32::SetConsoleTitle(Core.Native.Converter::ToWCharPtr(title));
	}

	public static function Write(Core.String text)
	{
		OutputStream::Write(text);
		OutputStream::Flush();
	}

	public static function WriteLine(Core.String text)
	{
		OutputStream::Write(text);
		OutputStream::Write("\n");
		OutputStream::Flush();
	}

	private Core.StreamWriter OutputStream
	{
		get
		{
			if (out == null)
				out = new Core.StreamWriter(
					new Core.FileStream("CONOUT$", 2),
					new Core.Encoding(Core.Native.Win32::GetConsoleOutputCP())
				);
			return out;
		}
	}
}
