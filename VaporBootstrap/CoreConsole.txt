class Core.Console
{
	private static Core.StreamWriter out;

	public static function SetConsoleTitle(Core.String title)
	{
		Core.Native.Win32::SetConsoleTitle(Core.Native.Converter::ToWCharPtr(title));
	}

	public static function Write(Core.String text)
	{
		.getOutputStream()::Write(text);
		.getOutputStream()::Flush();
	}

	public static function WriteLine(Core.String text)
	{
		.getOutputStream()::Write(text);
		.getOutputStream()::Write("\n");
		.getOutputStream()::Flush();
	}

	private static function .getOutputStream() -> Core.StreamWriter
	{
		if (out == null)
			out = new Core.StreamWriter(
				new Core.FileStream("CONOUT$", 2),
				new Core.Encoding(Core.Native.Win32::GetConsoleOutputCP())
			);
		return out;
	}
}
